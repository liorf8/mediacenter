#labels Phase-Deploy,SSLTLS,PublicPrivatekey,Certificate,keytool
Source: http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#RMISample


=Creating a Keystore to Use with JSSE=
==Creating a Simple Keystore and Truststore==

In this section, we'll use keytool to create a simple JKS keystore suitable for use with JSSE.
We'll make a keyEntry (with public/private keys) in the keystore,
then make a corresponding trustedCertEntry (public keys only) in a truststore.
(For client authentication, you'll need to do a similar process for the client's certificates.)
Note: Storing trust anchors in PKCS12 is not supported.
Users should use JKS for storing trust anchors and PKCS12 for private keys. 


===1. Create a new keystore and self-signed certificate with corresponding public/private keys.===

{{{

C:\Program Files\Java\jdk1.6.0_24\bin>keytool -genkeypair -alias duke -keyalg RS
A -validity 7 -keystore D:\mhertram\keystore
Geben Sie das Keystore-Passwort ein: password
Geben Sie das Passwort erneut ein: password
Wie lautet Ihr Vor- und Nachname?
 [Unknown]:  Max Hertrampf
Wie lautet der Name Ihrer organisatorischen Einheit?
 [Unknown]:  Telekom Ausbildung
Wie lautet der Name Ihrer Organisation?
 [Unknown]:  Deutsche Telekom AG
Wie lautet der Name Ihrer Stadt oder Gemeinde?
 [Unknown]:  Frankfurt am Main
Wie lautet der Name Ihres Bundeslandes oder Ihrer Provinz?
 [Unknown]:  HE
Wie lautet der Landescode (zwei Buchstaben) für diese Einheit?
 [Unknown]:  DE
Ist CN=Max Hertrampf, OU=Telekom Ausbildung, O=Deutsche Telekom AG, L=Frankfurt
am Main, ST=HE, C=DE richtig?
 [Nein]:  ja

Geben Sie das Passwort für <duke> ein.
        (EINGABETASTE, wenn Passwort dasselbe wie für Keystore):
}}}

This is the keystore that the server will use.


==================================================
2. Examine the keystore. Notice the entry type is keyEntry
which means that this entry has a private key associated with it (shown in red). 
==================================================
{{{
C:\Program Files\Java\jdk1.6.0_24\bin>keytool -list -v -keystore D:\mhertram\key
store
Geben Sie das Keystore-Passwort ein: password

Keystore-Typ: JKS
Keystore-Provider: SUN

Ihr Keystore enthält 1 Eintrag/-äge.

Aliasname: duke
Erstellungsdatum: 12.01.2012
Eintragstyp: PrivateKeyEntry
Zertifikatskettenlänge: 1
Zertifikat[1]:
Eigner: CN=Max Hertrampf, OU=Telekom Ausbildung, O=Deutsche Telekom AG, L=Frankf
urt am Main, ST=HE, C=DE
Aussteller: CN=Max Hertrampf, OU=Telekom Ausbildung, O=Deutsche Telekom AG, L=Fr
ankfurt am Main, ST=HE, C=DE
Seriennummer: 4f0efa76
Gultig von: Thu Jan 12 16:21:26 CET 2012 bis: Thu Jan 19 16:21:26 CET 2012
Digitaler Fingerabdruck des Zertifikats:
         MD5:  E4:76:40:B1:FE:E8:7E:34:FE:17:64:16:51:B0:21:DE
         SHA1: 62:5C:42:86:3F:29:5E:B2:30:3F:C7:0B:EC:4F:DC:A7:63:46:9C:F4
         Unterschrift-Algorithmusname: SHA1withRSA
         Version: 3


*******************************************
*******************************************
}}}

==================================================
3. Export and examine the self-signed certificate. 
==================================================

====================
3.A Export
====================
{{{
C:\Program Files\Java\jdk1.6.0_24\bin>keytool -export -alias duke -keystore D:\m
hertram\keystore -rfc -file D:\mhertram\duke.cer
Geben Sie das Keystore-Passwort ein: password
Zertifikat in Datei <D:\mhertram\duke.cer> gespeichert.
}}}

====================
3.B Just view (without -file option)
====================
{{{
C:\Program Files\Java\jdk1.6.0_24\bin>keytool -export -alias duke -keystore D:\m
hertram\keystore -rfc
Geben Sie das Keystore-Passwort ein: password
-----BEGIN CERTIFICATE-----
MIICizCCAfSgAwIBAgIETw76djANBgkqhkiG9w0BAQUFADCBiTELMAkGA1UEBhMCREUxCzAJBgNV
BAgTAkhFMRowGAYDVQQHExFGcmFua2Z1cnQgYW0gTWFpbjEcMBoGA1UEChMTRGV1dHNjaGUgVGVs
ZWtvbSBBRzEbMBkGA1UECxMSVGVsZWtvbSBBdXNiaWxkdW5nMRYwFAYDVQQDEw1NYXggSGVydHJh
bXBmMB4XDTEyMDExMjE1MjEyNloXDTEyMDExOTE1MjEyNlowgYkxCzAJBgNVBAYTAkRFMQswCQYD
VQQIEwJIRTEaMBgGA1UEBxMRRnJhbmtmdXJ0IGFtIE1haW4xHDAaBgNVBAoTE0RldXRzY2hlIFRl
bGVrb20gQUcxGzAZBgNVBAsTElRlbGVrb20gQXVzYmlsZHVuZzEWMBQGA1UEAxMNTWF4IEhlcnRy
YW1wZjCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAgsYCPQJhl59SL7fJP9RYzDSvruFF9mpg
JqD9VVuNLkdoOnM6O3hBpMhjGhAT8JOo3Z93lKPZ7aw0NanepDBoxFapdB5Pir/BgTgDl0MkWjsQ
8KNM1LziAV/BCpMZq0RNQw25aJvkStuHudfmumvWFk/H3KLQ1MyzjHciyEW+jdMCAwEAATANBgkq
hkiG9w0BAQUFAAOBgQBoAgiCY8sJoujGCu6HzWUH8iD4YAE8amhrA1UWQptuS6YW/7reXXEfS9Hk
jxbUZN5XTvVHcNP/rwpTb+MZh44iGjbwh5AB14m+BvvqLR676VPmguCCQRkPFYGSxdf0Ada/zRUP
g9SAJregT9dZmFQeIUBAWUN91viZCqNZQLrfcw==
-----END CERTIFICATE-----
}}}

==================================================
4.Import the certificate into a new truststore.
==================================================
{{{
C:\Program Files\Java\jdk1.6.0_24\bin>keytool -import -alias dukecert -file D:\m
hertram\duke.cer -keystore D:\mhertram\truststore
Geben Sie das Keystore-Passwort ein: trustword
Geben Sie das Passwort erneut ein: trustword
Eigner: CN=Max Hertrampf, OU=Telekom Ausbildung, O=Deutsche Telekom AG, L=Frankf
urt am Main, ST=HE, C=DE
Aussteller: CN=Max Hertrampf, OU=Telekom Ausbildung, O=Deutsche Telekom AG, L=Fr
ankfurt am Main, ST=HE, C=DE
Seriennummer: 4f0efa76
Gültig von: Thu Jan 12 16:21:26 CET 2012 bis: Thu Jan 19 16:21:26 CET 2012
Digitaler Fingerabdruck des Zertifikats:
         MD5:  E4:76:40:B1:FE:E8:7E:34:FE:17:64:16:51:B0:21:DE
         SHA1: 62:5C:42:86:3F:29:5E:B2:30:3F:C7:0B:EC:4F:DC:A7:63:46:9C:F4
         Unterschrift-Algorithmusname: SHA1withRSA
         Version: 3
Diesem Zertifikat vertrauen? [Nein]:  ja
Zertifikat wurde zu Keystore hinzugefügt.
}}}

==================================================
5. Examine the truststore. Note that the entry type is trustedCertEntry,
which means that a private key is not available for this entry (shown in red).
It also means that this file is not suitable as a KeyManager's keystore. 
==================================================
{{{
C:\Program Files\Java\jdk1.6.0_24\bin>keytool -list -v -keystore D:\mhertram\tru
ststore
Geben Sie das Keystore-Passwort ein: trustword

Keystore-Typ: JKS
Keystore-Provider: SUN

Ihr Keystore enthält 1 Eintrag/-äge.

Aliasname: dukecert
Erstellungsdatum: 12.01.2012
Eintragstyp: trustedCertEntry

Eigner: CN=Max Hertrampf, OU=Telekom Ausbildung, O=Deutsche Telekom AG, L=Frankf
urt am Main, ST=HE, C=DE
Aussteller: CN=Max Hertrampf, OU=Telekom Ausbildung, O=Deutsche Telekom AG, L=Fr
ankfurt am Main, ST=HE, C=DE
Seriennummer: 4f0efa76
Gültig von: Thu Jan 12 16:21:26 CET 2012 bis: Thu Jan 19 16:21:26 CET 2012
Digitaler Fingerabdruck des Zertifikats:
         MD5:  E4:76:40:B1:FE:E8:7E:34:FE:17:64:16:51:B0:21:DE
         SHA1: 62:5C:42:86:3F:29:5E:B2:30:3F:C7:0B:EC:4F:DC:A7:63:46:9C:F4
         Unterschrift-Algorithmusname: SHA1withRSA
         Version: 3


*******************************************
*******************************************
}}}

==================================================
Now run your applications with the appropriate key stores.
This example assumes the default X509KeyManager and X509TrustManager are used,
thus we will select the keystores using the system properties described in Customization.
==================================================
{{{
    % java -Djavax.net.ssl.keyStore=keystore \
      -Djavax.net.ssl.keyStorePassword=password Server

    % java -Djavax.net.ssl.trustStore=truststore \
      -Djavax.net.ssl.trustStorePassword=trustword Client
}}}