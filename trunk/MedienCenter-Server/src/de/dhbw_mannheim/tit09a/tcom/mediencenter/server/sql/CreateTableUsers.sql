CREATE TABLE IF NOT EXISTS Users
(
	id BIGINT GENERATED BY DEFAULT AS IDENTITY (START WITH 1, INCREMENT BY 1) PRIMARY KEY,
	login VARCHAR(63) NOT NULL,
	login_lc VARCHAR(63) GENERATED ALWAYS AS (LCASE(login)) NOT NULL,
	pw VARCHAR(255) NOT NULL,
	salt VARCHAR(63) NOT NULL,
	reg_ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,

	CONSTRAINT uc_login UNIQUE (login),
	CONSTRAINT cc_login_gt0 CHECK(CHARACTER_LENGTH(login) > 0),
	
	CONSTRAINT uc_login_lc UNIQUE (login_lc),
	CONSTRAINT cc_login_lc_gt0 CHECK(CHARACTER_LENGTH(login_lc) > 0),
	
	CONSTRAINT cc_pw_gt0 CHECK(CHARACTER_LENGTH(pw) > 0),
	CONSTRAINT cc_salt_gt0 CHECK(CHARACTER_LENGTH(salt) > 0)
);
